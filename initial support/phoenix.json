"maintainer": "Sharm G",
"oem": "Poco",
"device": "POCO X2",
"filename": "crDroidAndroid-11.0-20211107-phoenix-v7.11.zip",
"download": "https://sourceforge.net/projects/crdroid/files/phoenix/7.x/crDroidAndroid-11.0-20211107-phoenix-v7.11.zip/download",
"timestamp": 1636278297,
"md5": "c5612df84d6e1c48fb42f4b1f2f19937",
"size": 1397010548,
"version": "7.11",
"buildtype": "Monthly",
"forum": "https://forum.xda-developers.com/t/rom-11-0-official-crdroid-v7.4210283",
"gapps": "https://sourceforge.net/projects/flamegapps/files/arm64/android-11/",
"firmware": "https://sourceforge.net/projects/crdroid/files/phoenix/7.x/firmware/fw_phoenix_miui_PHOENIX_21.7.21.zip/download",
"recovery": "https://sourceforge.net/projects/crdroid/files/phoenix/7.x/recovery/OrangeFox-phoenix-stable@R11.1_1.zip/download",
"telegram": "https://t.me/crDroidPocoX2"

#don't modify from here
script_path="`dirname \"$0\"`"
zip_name=$script_path/out/target/product/$device/$zip
buildprop=$script_path/out/target/product/$device/system/build.prop

if [ -f $script_path/$device.json ]; then
  rm $script_path/$device.json
fi

linenr=`grep -n "ro.system.build.date.utc" $buildprop | cut -d':' -f1`
timestamp=`sed -n $linenr'p' < $buildprop | cut -d'=' -f2`
zip_only=`basename "$zip_name"`
md5=`md5sum "$zip_name" | cut -d' ' -f1`
size=`stat -c "%s" "$zip_name"`
version=`echo "$zip_only" | cut -d'-' -f5`
v_max=`echo "$version" | cut -d'.' -f1 | cut -d'v' -f2`
v_min=`echo "$version" | cut -d'.' -f2`
version=`echo $v_max.$v_min`

echo '{
  "response": [
    {
        "maintainer": "'$maintainer'",
        "oem": "'$oem'",
        "device": "'$devicename'",
        "filename": "'$zip_only'",
        "download": "https://sourceforge.net/projects/crdroid/files/'$device'/'$v_max'.x/'$zip_only'/download",
        "timestamp": '$timestamp',
        "md5": "'$md5'",
        "size": '$size',
        "version": "'$version'",
        "buildtype": "'$buildtype'",
        "forum": "'$forum'",
        "gapps": "'$gapps'",
        "firmware": "'$firmware'",
        "modem": "'$modem'",
        "bootloader": "'$bootloader'",
        "recovery": "'$recovery'",
        "paypal": "'$paypal'",
        "telegram": "'$telegram'"
    }
  ]
}' >> $device.json
